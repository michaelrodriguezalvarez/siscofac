{% extends 'base.html.twig' %}

{% block title %}{% trans %}Listar{% endtrans %} {% trans %}Facturas{% endtrans %}{% endblock %}

{% block body %}
    <div class="container small">

    <h5>{% trans %}Listar{% endtrans %} {% trans %}Facturas{% endtrans %}</h5>
    <br>
    <br>

    {% include 'contrato/botones_factura.html.twig' %}
    {% include 'contrato/ventana_modal.html.twig' %}

    {% for message in app.flashes('notice') %}
        <div class="alert-info">
            {{ message |trans}}
        </div>
    {% endfor %}


    <br>

    {% if facturas | length == 0%}
            <div class="col-lg-12">
                <p class="alert-info">{% trans %}No se encontraron registros{% endtrans %}</p>
            </div>
        {% else %}

        <table id="table_facturas_index" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>{% trans %}Contrato{% endtrans %}</th>
                <th>{% trans %}Proveedor{% endtrans %}</th>
                <th>{% trans %}Numero de registro{% endtrans %}</th>
                <th>{% trans %}No. de Factura del Proveedor{% endtrans %}</th>
                <th>{% trans %}Fecha{% endtrans %}</th>
                <th>{% trans %}Tipo Servicio{% endtrans %}</th>
                <th>{% trans %}Concepto{% endtrans %}</th>
                <th>{% trans %}Valor Cup{% endtrans %}</th>
                <th>{% trans %}Valor Cuc{% endtrans %}</th>
                <th>{% trans %}Estado{% endtrans %}</th>
                <th>{% trans %}Numero Cheque{% endtrans %}</th>
                <th>{% trans %}Fecha Cheque{% endtrans %}</th>
                <th>{% trans %}Acciones{% endtrans %}</th>
            </tr>
        </thead>
        <tbody>
        {% for factura in facturas %}
            <tr>
                <td>{{ contrato }}</td>
                <td>{{ proveedor }} - {{ provincia }}</td>
                <td>{{ factura.numeroRegistro }}</td>
                <td>{{ factura.numeroDelProveedor }}</td>
                <td>{{ factura.fecha ? factura.fecha|date('d-m-Y') : '' }}</td>
                <td>{{ tipos_de_servicios[factura.tipoServicio] }}</td>
                <td>{{ factura.concepto }}</td>
                <td>{{ factura.valorCup }}</td>
                <td>{{ factura.valorCuc }}</td>
                <td>
                    {% if factura.estado == 0 %}
                        <span>No Pagado</span>
                    {% else %}
                        <span>Pagado</span>
                    {% endif %}
                </td>
                <td>{{ factura.numeroCheque }}</td>
                <td>{{ factura.fechaCheque ? factura.fechaCheque|date('d-m-Y') : '' }}</td>
                <td>
                    <a href="{{ path('factura_show', {'id': factura.id}) }}">show</a>
                    <a href="{{ path('factura_edit', {'id': factura.id}) }}">edit</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="12">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
{% endblock %}